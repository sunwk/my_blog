<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>blog detail</title>

    <link rel="stylesheet" href="/static/css/lxfcss1.css"/>
    <link rel="stylesheet" href="/static/css/lxfcss2.css"/>
    <link rel="stylesheet" href="/static/css/lxfcss3.css"/>

    <!-- Bootstrap Core CSS -->
    <link href="../static/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="../static/css/blog-home.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script src="//cdn.bootcss.com/jquery/3.1.0/jquery.min.js"></script>
</head>
<body>

<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse"
                    data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#">Home</a>
        </div>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav">
                <li>
                    <a href="#">About</a>
                </li>
                <li>
                    <a href="#">Services</a>
                </li>
                <li>
                    <a href="#">Contact</a>
                </li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>


<div class="container">

    <div class="row">

        <!-- Blog Entries Column -->
        <div class="col-md-10 col-md-offset-1">

            <h1 class="page-header">
                我的博客
                <small>详情</small>
            </h1>

            <!-- First Blog Post -->
            <h2>
                <p>Blog Post Title</p>
            </h2>
            <p class="lead">
                by <a href="index.php">Start Bootstrap</a>
            </p>
            <p><span class="glyphicon glyphicon-time"></span> Posted on August 28, 2013 at 10:00 PM</p>
            <hr>
            <img class="img-responsive" src="http://placehold.it/900x300" alt="">
            <hr>
            <p>{{ blog }}啊懂法发送扥阿萨扥</p>

            <hr>

            <!-- Pager -->
            <ul class="pager">
                <li class="previous">
                    <a href="#">&larr; Older</a>
                </li>
                <li class="next">
                    <a href="#">Newer &rarr;</a>
                </li>
            </ul>

            <hr>
        </div>
    </div>
</div>

<div class="container">
    <div class="row">
        <!-- Blog Entries Column -->
        <div class="col-md-10 col-md-offset-1">
            <h1 class="page-header">
                评论区
                <small>详情</small>
            </h1>
            <ul id="x-comment-list" class="uk-comment-list">
                <li>
                    <div class="uk-comment">
                        <div class="uk-comment-header" style="margin-bottom:0">
                            <a target="_blank" href="/user/001470991008137fdbeeb76eebe45629a9b0da89ec34163000"><img
                                    class="uk-comment-avatar uk-border-circle x-avatar"
                                    src="http://tva3.sinaimg.cn/crop.0.0.170.170.50/006wfzUWjw8f5chyr9i1uj304q04qt8h.jpg"
                                    width="50" height="50" alt=""></a>
                            <h4 class="uk-comment-title"><a target="_blank"
                                                            href="/discuss/001409195742008d822b26cf3de46aea14f2b7378a1ba91000/0014712296710627da1cf7b96194d779f39f289a6200784000">精英加油，感谢分享</a>
                            </h4>
                            <div class="uk-comment-meta"><a target="_blank"
                                                            href="/user/001470991008137fdbeeb76eebe45629a9b0da89ec34163000">大河马的大鼻子</a>
                                created at 8-15 10:54, Last updated at 8-15 10:54
                            </div>
                        </div>
                        <div class="uk-comment-body x-auto-content">
                            <p>廖哥，首先感谢你无私的分享自己的知识和经验。</p>
                            <p>提一个小建议，感谢费修改一下，1元钱，5元钱，10元钱，50元钱。</p>
                            <p>可能您不在乎这点钱，不是靠这个钱过日子，但是有没有试过额度定小一点，是不是可能会带来更多的小费呢？</p>
                            <p>哦，对了，YouTube的推荐功能是python写的</p>

                        </div>
                    </div>
                    <ul>
                        <li>
                            <div class="x-comment-info">
                                <hr>
                                <a target="_blank" class="uk-button uk-button-small"
                                   href="/discuss/001409195742008d822b26cf3de46aea14f2b7378a1ba91000/0014712296710627da1cf7b96194d779f39f289a6200784000"><i
                                        class="uk-icon-list-ul"></i> View Full Discuss</a>
                                &nbsp;
                                <a target="_blank" class="uk-button uk-button-small"
                                   href="/discuss/001409195742008d822b26cf3de46aea14f2b7378a1ba91000/0014712296710627da1cf7b96194d779f39f289a6200784000#reply"><i
                                        class="uk-icon-reply"></i> Reply This Topic</a>
                            </div>
                        </li>
                    </ul>
                </li>
                {% for comment in comments %}
                    <li>
                        <div class="uk-comment">
                            <div class="uk-comment-header" style="margin-bottom:0">
                                <a target="_blank" href="/user/001470991008137fdbeeb76eebe45629a9b0da89ec34163000"><img
                                        class="uk-comment-avatar uk-border-circle x-avatar"
                                        src="http://tva3.sinaimg.cn/crop.0.0.170.170.50/006wfzUWjw8f5chyr9i1uj304q04qt8h.jpg"
                                        width="50" height="50" alt=""></a>
                                <h4 class="uk-comment-title"><a target="_blank"
                                                                href="/discuss/001409195742008d822b26cf3de46aea14f2b7378a1ba91000/0014712296710627da1cf7b96194d779f39f289a6200784000">{{ comment.title }}</a>
                                </h4>
                                <div class="uk-comment-meta"><a target="_blank"
                                                                href="/user/001470991008137fdbeeb76eebe45629a9b0da89ec34163000">待补充用户名</a>
                                    created at {{ comment.created_time }}
                                </div>
                            </div>
                            <div class="uk-comment-body x-auto-content">
                                {{ comment.content }}
                            </div>
                        </div>
                        <ul>
                            <li>
                                <div class="x-comment-info">
                                    <hr>
                                    <a target="_blank" class="uk-button uk-button-small"
                                       href="/discuss/001409195742008d822b26cf3de46aea14f2b7378a1ba91000/0014712296710627da1cf7b96194d779f39f289a6200784000"><i
                                            class="uk-icon-list-ul"></i> View Full Discuss</a>
                                    &nbsp;
                                    <a target="_blank" class="uk-button uk-button-small"
                                       href="/discuss/001409195742008d822b26cf3de46aea14f2b7378a1ba91000/0014712296710627da1cf7b96194d779f39f289a6200784000#reply"><i
                                            class="uk-icon-reply"></i> Reply This Topic</a>
                                </div>
                            </li>
                        </ul>
                    </li>
                {% endfor %}
            </ul>
            <!--<form class="form-horizontal">-->
            <!--<textarea class="form-control" rows="3"></textarea>-->
            <!--<button type="submit" class="btn btn-default">提交</button>-->
            <!--</form>-->
            <form class="form-horizontal" action="/blog/comments" method="POST">
                <div class="form-group">
                    <label for="id-input-title" class="col-sm-2 control-label">标题</label>
                    <div class="col-sm-10">
                        <input name="title" class="form-control" id="id-input-title" placeholder="标题">
                    </div>
                </div>
                <div class="form-group">
                    <label for="id-input-content" class="col-sm-2 control-label">内容</label>
                    <div class="col-sm-10">
                        <textarea name="content" class="form-control" rows="3" id="id-input-content"
                                  placeholder="内容"></textarea>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-sm-offset-2 col-sm-10">
                        <button type="button" id="id-button-submit" class="btn btn-default">提交</button>
                    </div>
                </div>
            </form>
            <hr>
        </div>
    </div>
</div>
<!--&lt;!&ndash; Blog Search Well &ndash;&gt;-->
<!--<div class="well">-->
<!--<h4>Blog Search</h4>-->
<!--<div class="input-group">-->
<!--<input type="text" class="form-control">-->
<!--<span class="input-group-btn">-->
<!--<button class="btn btn-default" type="button">-->
<!--<span class="glyphicon glyphicon-search"></span>-->
<!--</button>-->
<!--</span>-->
<!--</div>-->
<!--&lt;!&ndash; /.input-group &ndash;&gt;-->
<!--</div>-->


<!--<script>-->
<!--$(document).ready(function () {-->
<!--console.log('ready');-->
<!--var button = $('#id-button-submit');-->
<!--var title_input = $('#id-input-title');-->
<!--var content_input = $('#id-input-content');-->
<!--button.on('click', function () {-->
<!--var title = title_input.val();-->
<!--var content = content_input.val();-->
<!--var data = {-->
<!--title: title,-->
<!--content: content-->
<!--};-->
<!--var url = "/blog/comments/add";-->
<!--console.log('准备发送request');-->
<!--var request = {-->
<!--url: url,-->
<!--contentType: 'application/json',-->
<!--type: 'post',-->
<!--data: data,-->
<!--success: function (r) {-->
<!--console.log('服务器返回了:', r);-->
<!--}-->
<!--};-->
<!--$.ajax(request);-->
<!--})-->
<!--})-->

<!--</script>-->
<script>
    $(document).ready(function () {
        console.log('ready');
        var button = $('#id-button-submit');
        var title_input = $('#id-input-title');
        var content_input = $('#id-input-content');
        button.on('click', function () {
            var title = title_input.val();
            var content = content_input.val();
            preparsedContent = content.split('\n');
            var completeContent = '';
            for(var i=0; i<preparsedContent.length; i++){
                var temp = '<p>' + preparsedContent[i] + '</p>';
                completeContent = completeContent + temp
            }
            console.log('fuck you ')
            console.log('fuck you!!!!!!', preparsedContent.length);
            console.log('preparsedContent :',preparsedContent);
            console.log('completeContent :',completeContent);
            var data = {
                title: title,
                content: completeContent
            };
            var json_data = JSON.stringify(data);
            console.log('debug json_data :', json_data);
            var request = {
                url: "/blog/comments/add",
                contentType: 'application/json',
                type: 'post',
                data: json_data,
                success: function (r) {
                    console.log('服务器返回了:', r);
                    insertComment(r)
                }
            };
            $.ajax(request);
        })
    });

    
    var insertComment = function (comment) {
//        for (var i = 0; i < products.length; i++) {
//            var c = comments[i];
            console.log('comment', comment.title);
            var t = commentTemplate(comment);
            $('#x-comment-list').append(t);
        };
//    };

    var commentTemplate = function (comment) {
        var title = comment.title;
        var id = comment.id;
        var content = comment.content;
        var created_time = comment.created_time;
        // name 需要自行去抓去一些有用的
        // 封面图片自行去抓去一些 取名为 1.jpg  2.jpg  3.jpg
        // 然后灌数据库的时候就可以直接 灌出有用的 coverUrl 了
        var t = `
        <li>
            <div class="uk-comment">
                <div class="uk-comment-header" style="margin-bottom:0">
                    <a target="_blank" href="/user/001470991008137fdbeeb76eebe45629a9b0da89ec34163000"><img
                            class="uk-comment-avatar uk-border-circle x-avatar"
                            src="http://tva3.sinaimg.cn/crop.0.0.170.170.50/006wfzUWjw8f5chyr9i1uj304q04qt8h.jpg"
                            width="50" height="50" alt=""></a>
                    <h4 class="uk-comment-title"><a target="_blank"
                                                    href="/discuss/001409195742008d822b26cf3de46aea14f2b7378a1ba91000/0014712296710627da1cf7b96194d779f39f289a6200784000">${title}</a>
                    </h4>
                    <div class="uk-comment-meta"><a target="_blank"
                                                    href="/user/001470991008137fdbeeb76eebe45629a9b0da89ec34163000">待补充用户名</a>
                        created at ${created_time}
                    </div>
                </div>
                <div class="uk-comment-body x-auto-content">
                    ${content}
                </div>
            </div>
            <ul>
                <li>
                    <div class="x-comment-info">
                        <hr>
                        <a target="_blank" class="uk-button uk-button-small"
                           href="/discuss/001409195742008d822b26cf3de46aea14f2b7378a1ba91000/0014712296710627da1cf7b96194d779f39f289a6200784000"><i
                                class="uk-icon-list-ul"></i> View Full Discuss</a>
                        &nbsp;
                        <a target="_blank" class="uk-button uk-button-small"
                           href="/discuss/001409195742008d822b26cf3de46aea14f2b7378a1ba91000/0014712296710627da1cf7b96194d779f39f289a6200784000#reply"><i
                                class="uk-icon-reply"></i> Reply This Topic</a>
                    </div>
                </li>
            </ul>
        </li>
        `;
        return t;
    };

    $(document).ready(function () {
        var divs = $('.x-auto-content');
        console.log('div', divs);
        for (var i=0; i<divs.length; i++){
            //var content = divs[i].html();
            currentDiv = divs[i];
            console.log('currentDiv:', currentDiv);
            var content = $(currentDiv).text();
            console.log('currentDiv content:', content);
            $(currentDiv).html(content);
        }
    })

</script>

</body>
</html>